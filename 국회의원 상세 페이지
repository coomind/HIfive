<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Law.GG - 안철수 국회의원</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: white;
            color: #333;
            line-height: 1.4;
        }

        /* 헤더 */
        .header {
            background-color: white;
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }

        .logo-img {
            height: 40px;
            width: auto;
        }

        .nav-menu {
            display: flex;
            gap: 30px;
        }

        .nav-item {
            color: #666;
            text-decoration: none;
            font-size: 15px;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-item:hover {
            color: #333;
        }

        /* 메인 컨테이너 */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px 20px;
        }

        /* 국회의원 프로필 */
        .member-profile {
            background-color: white;
            border-radius: 8px;
            padding: 40px;
            margin-bottom: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 40px;
        }

        .member-photo-section {
            text-align: center;
        }

        .member-photo {
            width: 250px;
            height: 300px;
            border-radius: 8px;
            background-color: #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-size: 16px;
            margin: 0 auto 20px;
            object-fit: cover;
        }

        .member-photo img {
            width: 100%;
            height: 100%;
            border-radius: 8px;
            object-fit: cover;
        }

        .party-tag {
            background-color: #28a745;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            display: inline-block;
            margin-bottom: 15px;
        }

        .member-info {
            flex: 1;
        }

        .member-name {
            font-size: 36px;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
        }

        .member-description {
            color: #666;
            font-size: 14px;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .info-section {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 6px;
        }

        .info-title {
            font-weight: 600;
            color: #495057;
            margin-bottom: 15px;
            font-size: 14px;
        }

        .info-content {
            color: #333;
            font-size: 14px;
            line-height: 1.5;
        }

        .contact-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .contact-label {
            font-weight: 600;
            color: #495057;
            width: 80px;
            flex-shrink: 0;
        }

        .contact-value {
            color: #333;
            font-size: 14px;
        }

        .district-info {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        .district-item {
            text-align: center;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 6px;
        }

        .district-label {
            font-size: 12px;
            color: #6c757d;
            margin-bottom: 5px;
        }

        .district-value {
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        /* 발의 법률안 섹션 */
        .bills-section {
            background-color: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin-bottom: 30px;
        }

        .bills-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .bill-card {
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            color: #333;
        }

        .bill-card:hover {
            border-color: #495057;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transform: translateY(-1px);
        }

        .bill-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            font-size: 15px;
            line-height: 1.4;
        }

        .bill-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #6c757d;
        }

        .bill-status {
            background-color: #495057;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 11px;
        }

        /* 반응형 디자인 */
        @media (max-width: 1024px) {
            .member-profile {
                grid-template-columns: 250px 1fr;
                gap: 30px;
                padding: 30px;
            }

            .member-photo {
                width: 200px;
                height: 240px;
            }
        }

        @media (max-width: 768px) {
            .member-profile {
                grid-template-columns: 1fr;
                text-align: center;
                padding: 25px;
            }

            .member-photo {
                width: 200px;
                height: 240px;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }

            .contact-info {
                grid-template-columns: 1fr;
            }

            .district-info {
                grid-template-columns: 1fr;
            }

            .bills-grid {
                grid-template-columns: 1fr;
            }

            .member-name {
                font-size: 28px;
            }

            .container {
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <!-- 헤더 -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="your-logo.png" alt="LAW.GG" class="logo-img">
            </div>
            <nav class="nav-menu">
                <a href="#" class="nav-item">국회의원</a>
                <a href="#" class="nav-item">법률안</a>
                <a href="#" class="nav-item">입법제안</a>
            </nav>
        </div>
    </header>

    <!-- 메인 컨테이너 -->
    <main class="container">
        <!-- 국회의원 프로필 -->
        <section class="member-profile">
            <div class="member-photo-section">
                <div class="member-photo" id="member-photo">
                    <img src="https://via.placeholder.com/250x300/4a5568/ffffff?text=안철수" alt="안철수" style="width: 100%; height: 100%; border-radius: 8px; object-fit: cover;">
                </div>
            </div>

            <div class="member-info">
                <div class="party-tag" id="party-tag">국민의 힘</div>
                <h1 class="member-name" id="member-name">안철수</h1>
                <p class="member-description" id="member-description">
                    제19대, 제20대, 제21대, 제22대 국회의원
                </p>

                <!-- 경력 및 학력 정보 -->
                <div class="info-grid">
                    <div class="info-section">
                        <h3 class="info-title">대표 경력</h3>
                        <div class="info-content" id="career-info">
                            한국 - 경기 성남시의료구<br>
                            한국자 투표율<br>
                            국회의원 홈페이지 url<br>
                            학력
                        </div>
                    </div>
                    <div class="info-section">
                        <h3 class="info-title">학력</h3>
                        <div class="info-content" id="education-info">
                            정보를 불러오는 중...<br>
                            API 연동 후 표시
                        </div>
                    </div>
                </div>

                <!-- 연락처 정보 -->
                <div class="contact-info">
                    <div class="contact-item">
                        <span class="contact-label">전화번호:</span>
                        <span class="contact-value" id="phone-number">02-6788-6296</span>
                    </div>
                    <div class="contact-item">
                        <span class="contact-label">이메일:</span>
                        <span class="contact-value" id="email">csahn436@gmail.com</span>
                    </div>
                </div>

                <!-- 선거구 정보 -->
                <div class="district-info">
                    <div class="district-item">
                        <div class="district-label">선거구</div>
                        <div class="district-value" id="district-name">성남 분당을</div>
                    </div>
                    <div class="district-item">
                        <div class="district-label">득표율</div>
                        <div class="district-value" id="vote-rate">45.2%</div>
                    </div>
                    <div class="district-item">
                        <div class="district-label">홈페이지</div>
                        <div class="district-value">
                            <a href="http://ahncs.kr" id="homepage-link" target="_blank" style="color: #007bff; text-decoration: none;">방문</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 발의 법률안 섹션 -->
        <section class="bills-section">
            <h2 class="section-title">발의 법률안</h2>
            <div class="bills-grid" id="bills-grid">
                <a href="#" class="bill-card" data-bill-id="BILL001">
                    <div class="bill-title">인공지능 혁신 및 규제법안</div>
                    <div class="bill-meta">
                        <span>2024-03-15</span>
                        <span class="bill-status">발의안 정보</span>
                    </div>
                </a>

                <a href="#" class="bill-card" data-bill-id="BILL002">
                    <div class="bill-title">선량기술의 유출방지 및 보호에 관한 법률 일부개정법률안</div>
                    <div class="bill-meta">
                        <span>2024-02-28</span>
                        <span class="bill-status">발의안 정보</span>
                    </div>
                </a>

                <a href="#" class="bill-card" data-bill-id="BILL003">
                    <div class="bill-title">도시 및 주거환경정비법 일부개정법률안</div>
                    <div class="bill-meta">
                        <span>2024-01-20</span>
                        <span class="bill-status">발의안 정보</span>
                    </div>
                </a>

                <a href="#" class="bill-card" data-bill-id="BILL004">
                    <div class="bill-title">방송법 일부개정법률안</div>
                    <div class="bill-meta">
                        <span>2023-12-10</span>
                        <span class="bill-status">발의안 정보</span>
                    </div>
                </a>

                <a href="#" class="bill-card" data-bill-id="BILL005">
                    <div class="bill-title">전기통신사업법 일부개정법률안</div>
                    <div class="bill-meta">
                        <span>2023-11-25</span>
                        <span class="bill-status">발의안 정보</span>
                    </div>
                </a>

                <a href="#" class="bill-card" data-bill-id="BILL006">
                    <div class="bill-title">4·16세월호참사 진상구명 및 안전사회 건설 등을 위한 특별법 일부개정법률안</div>
                    <div class="bill-meta">
                        <span>2023-10-30</span>
                        <span class="bill-status">발의안 정보</span>
                    </div>
                </a>
            </div>
        </section>
    </main>

    <script>
        // API 설정
        const API_CONFIG = {
            memberUrl: 'https://open.assembly.go.kr/portal/openapi/nwvrqwxyaytdsfvhu',
            billUrl: 'https://open.assembly.go.kr/portal/openapi/nzmimeepazxkubdpn',
            key: '69e4e44944d642599c407265cef3443b'
        };

        // 현재 국회의원 정보
        let currentMember = null;

        // URL에서 국회의원 ID 가져오기
        function getMemberIdFromUrl() {
            // 실제로는 URL 파라미터에서 가져옴
            // return new URLSearchParams(window.location.search).get('memberId');
            // 테스트용 임시 ID
            return 'TEST_MEMBER_ID';
        }

        // 국회의원 상세 정보 가져오기
        async function fetchMemberDetail(memberId) {
            try {
                const params = {
                    Key: API_CONFIG.key,
                    Type: 'json',
                    pIndex: 1,
                    pSize: 1,
                    MONA_CD: memberId
                };
                
                const queryString = new URLSearchParams(params).toString();
                const response = await fetch(`${API_CONFIG.memberUrl}?${queryString}`);
                const data = await response.json();
                
                if (data.nwvrqwxyaytdsfvhu && data.nwvrqwxyaytdsfvhu[1] && data.nwvrqwxyaytdsfvhu[1].row) {
                    return data.nwvrqwxyaytdsfvhu[1].row[0];
                }
                return null;
            } catch (error) {
                console.error('국회의원 정보 가져오기 실패:', error);
                return null;
            }
        }

        // 국회의원 발의 법률안 가져오기
        async function fetchMemberBills(memberName) {
            try {
                const params = {
                    Key: API_CONFIG.key,
                    Type: 'json',
                    pIndex: 1,
                    pSize: 6,
                    AGE: '22',
                    PROPOSER: memberName
                };
                
                const queryString = new URLSearchParams(params).toString();
                const response = await fetch(`${API_CONFIG.billUrl}?${queryString}`);
                const data = await response.json();
                
                if (data.nzmimeepazxkubdpn && data.nzmimeepazxkubdpn[1] && data.nzmimeepazxkubdpn[1].row) {
                    return data.nzmimeepazxkubdpn[1].row;
                }
                return [];
            } catch (error) {
                console.error('발의 법률안 가져오기 실패:', error);
                return [];
            }
        }

        // 엑셀에서 득표율 정보 가져오기 (시뮬레이션)
        function getVoteRateFromExcel(memberName) {
            // 실제로는 업로드된 엑셀 파일에서 검색
            const voteData = {
                '안철수': '45.2%',
                '김영식': '52.1%',
                '강민구': '38.9%'
            };
            return voteData[memberName] || '-';
        }

        // 국회의원 정보 업데이트
        function updateMemberInfo(member) {
            // 사진
            const photoEl = document.getElementById('member-photo');
            if (member.PHOTO_URL) {
                photoEl.innerHTML = `<img src="${member.PHOTO_URL}" alt="${member.HG_NM}">`;
            } else {
                photoEl.textContent = '사진 없음';
            }

            // 정당
            document.getElementById('party-tag').textContent = member.POLY_NM || '-';

            // 이름
            document.getElementById('member-name').textContent = member.HG_NM || '-';

            // 약력 (API에서 제공되는 경우)
            document.getElementById('member-description').textContent = 
                `제${member.DAESU || '22'}대 국회의원, ${member.ORIG_NM || ''}선출, ${member.ELECT_GBN_NM || ''} 당선`;

            // 경력 정보 (API 필드에 따라 조정)
            document.getElementById('career-info').innerHTML = `
                • ${member.JD_NM || '정보 없음'}<br>
                • ${member.REELE_GBN_NM || ''}
            `;

            // 학력 정보 (API 필드에 따라 조정)  
            document.getElementById('education-info').innerHTML = `
                • 학력 정보를 불러오는 중...<br>
                • API 연동 후 표시
            `;

            // 연락처
            document.getElementById('phone-number').textContent = member.TEL_NO || '-';
            document.getElementById('email').textContent = member.E_MAIL || '-';

            // 선거구
            document.getElementById('district-name').textContent = member.ORIG_NM || '-';
            document.getElementById('vote-rate').textContent = getVoteRateFromExcel(member.HG_NM);
            
            // 홈페이지
            const homepageLink = document.getElementById('homepage-link');
            if (member.HOMEPAGE) {
                homepageLink.href = member.HOMEPAGE;
                homepageLink.textContent = '방문';
            } else {
                homepageLink.textContent = '-';
                homepageLink.removeAttribute('href');
            }

            currentMember = member;
        }

        // 발의 법률안 목록 업데이트
        function updateBillsList(bills) {
            const billsGrid = document.getElementById('bills-grid');
            
            if (bills.length === 0) {
                billsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #666;">
                        발의한 법률안이 없습니다.
                    </div>
                `;
                return;
            }

            let billsHTML = '';
            bills.forEach(bill => {
                const billName = bill.BILL_NAME || '법률안명 없음';
                const proposeDate = bill.PROPOSE_DT ? bill.PROPOSE_DT.substring(0, 10) : '-';
                const committee = bill.COMMITTEE || '-';
                
                billsHTML += `
                    <a href="#" class="bill-card" data-bill-id="${bill.BILL_ID}">
                        <div class="bill-title">${billName}</div>
                        <div class="bill-meta">
                            <span>${proposeDate}</span>
                            <span class="bill-status">${committee}</span>
                        </div>
                    </a>
                `;
            });

            billsGrid.innerHTML = billsHTML;

            // 법률안 카드 클릭 이벤트 추가
            document.querySelectorAll('.bill-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    e.preventDefault();
                    const billId = this.getAttribute('data-bill-id');
                    console.log(`법률안 상세로 이동: ${billId}`);
                    // 법률안 상세 페이지로 이동
                    // window.location.href = `/bill-detail?billId=${billId}`;
                });
            });
        }

        // 페이지 초기화
        async function initializePage() {
            const memberId = getMemberIdFromUrl();
            
            if (!memberId) {
                console.error('국회의원 ID가 없습니다.');
                return;
            }

            try {
                // 국회의원 정보 로드
                const member = await fetchMemberDetail(memberId);
                if (member) {
                    updateMemberInfo(member);
                    
                    // 발의 법률안 로드
                    const bills = await fetchMemberBills(member.HG_NM);
                    updateBillsList(bills);
                } else {
                    console.error('국회의원 정보를 찾을 수 없습니다.');
                }
            } catch (error) {
                console.error('페이지 초기화 실패:', error);
            }
        }

        // 페이지 로드 시 초기화
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>
